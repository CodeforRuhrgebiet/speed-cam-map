/**
 * van11y-accessible-modal-window-aria - ES2015 accessible modal window system, using ARIA (compatible IE9+ when transpiled)
 * @version v2.0.1
 * @link https://van11y.net/accessible-modal/
 * @license MIT : https://github.com/nico3333fr/van11y-accessible-modal-window-aria/blob/master/LICENSE
 */
"use strict";!function(t){function e(t,e){for("string"==typeof e&&(e=document.createElement(e)),t.appendChild(e);t.firstChild!==e;)e.appendChild(t.firstChild)}function a(t){t.parentNode.removeChild(t)}var o="js-modal",l="label_modal_",n="modal",d="data-modal-background-click",i="data-modal-prefix-class",r="data-modal-text",s="data-modal-content-id",c="data-modal-title",u="data-modal-close-text",m="data-modal-close-title",b="data-modal-close-img",g="dialog",f="modal-close",v="js-modal-close",A="js-modal-close",C="data-content-back-id",p="data-focus-back",h="modal__content",k="js-modal-content",y="modal__closeimg",x="modal-close__text",I="modal-title",L="modal-title",T="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",E="js-modal-page",j="js-modal",B="js-modal-overlay",M="modal-overlay",P="Close modal",_="data-background-click",w="invisible",D="no-scroll",H="role",N="open",S="aria-labelledby",q="aria-hidden",F="aria-haspopup",O="dialog",R=function(e){return t.getElementById(e)},$=function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},K=function(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")},V=function(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)},W=function(t,e){for(var a=!1,o=t.parentNode;o&&a===!1;)V(o,e)===!0?a=!0:o=o.parentNode;return a===!0?o.getAttribute("id"):""},z=function(t){var e=B,a=t.text||P,o=t.prefixClass+M,l="disabled"===t.backgroundEnabled?"disabled":"enabled";return'<span\n                  id="'+e+'"\n                  class="'+o+'"\n                  '+_+'="'+l+'"\n                  title="'+a+'"\n                  >\n                  <span class="'+w+'">'+a+"</span>\n                </span>"},G=function(t){var e=j,a=t.modalPrefixClass+n,o=t.modalPrefixClass+f,l=t.modalCloseImgPath?'<img src="'+t.modalCloseImgPath+'" alt="'+t.modalCloseText+'" class="'+y+'" />':'<span class="'+x+'">\n                                        '+t.modalCloseText+"\n                                       </span>",d=t.modalPrefixClass+h,i=t.modalPrefixClass+L,r=""!==t.modalTitle?'<h1 id="'+I+'" class="'+i+'">\n                                        '+t.modalTitle+"\n                                       </h1>":"",s='<button type="button" class="'+A+" "+o+'" id="'+v+'" title="'+t.modalCloseTitle+'" '+C+'="'+t.modalContentId+'" '+p+'="'+t.modalFocusBackId+'">\n                             '+l+"\n                            </button>",c=t.modalText;if(""===c&&t.modalContentId){var u=R(t.modalContentId);u&&(c='<div id="'+k+'">\n                            '+u.innerHTML+"\n                           </div",u.innerHTML="")}return'<dialog id="'+e+'" class="'+a+'" '+H+'="'+g+'" '+N+" "+S+'="'+I+'">\n                  <div role="document">\n                    '+s+'\n                    <div class="'+d+'">\n                      '+r+"\n                      "+c+"\n                    </div>\n                  </div>\n                </dialog>"},J=function(t){if(a(t.modal),a(t.overlay),""!==t.contentBackId){var e=R(t.contentBackId);e&&(e.innerHTML=t.modalContent)}if(t.modalFocusBackId){var o=R(t.modalFocusBackId);o&&o.focus()}},Q=function(){var e=arguments.length<=0||void 0===arguments[0]?t:arguments[0];return[].slice.call(e.querySelectorAll("."+o))},U=function(a){Q(a).forEach(function(a){var o=Math.random().toString(32).slice(2,12),n=R(E),d=t.querySelector("body");if(a.setAttribute("id",l+o),a.setAttribute(F,O),null===n||0===n.length){var i=t.createElement("DIV");i.setAttribute("id",E),e(d,i)}})};["click","keydown"].forEach(function(e){t.body.addEventListener(e,function(a){var l=W(a.target,o);if((V(a.target,o)===!0||""!==l)&&"click"===e){var n=t.querySelector("body"),g=""!==l?R(l):a.target,f=g.hasAttribute(i)===!0?g.getAttribute(i)+"-":"",h=g.hasAttribute(r)===!0?g.getAttribute(r):"",y=g.hasAttribute(s)===!0?g.getAttribute(s):"",x=g.hasAttribute(c)===!0?g.getAttribute(c):"",I=g.hasAttribute(u)===!0?g.getAttribute(u):P,L=g.hasAttribute(m)===!0?g.getAttribute(m):I,M=g.hasAttribute(b)===!0?g.getAttribute(b):"",w=g.hasAttribute(d)===!0?g.getAttribute(d):"",H=R(E);n.insertAdjacentHTML("beforeEnd",z({text:L,backgroundEnabled:w,prefixClass:f})),n.insertAdjacentHTML("beforeEnd",G({modalText:h,modalPrefixClass:f,backgroundEnabled:y,modalTitle:x,modalCloseText:I,modalCloseTitle:L,modalCloseImgPath:M,modalContentId:y,modalFocusBackId:g.getAttribute("id")})),H.setAttribute(q,"true"),$(n,D);var N=R(v);N.focus(),a.preventDefault()}var S=W(a.target,A);if((a.target.getAttribute("id")===v||""!==S||a.target.getAttribute("id")===B)&&"click"===e){var n=t.querySelector("body"),H=R(E),F=R(j),O=R(k)?R(k).innerHTML:"",Q=R(B),U=R(v),X=U.getAttribute(p),Y=U.getAttribute(C),w=Q.getAttribute(_);a.target.getAttribute("id")===B&&"disabled"===w||(J({modal:F,modalContent:O,overlay:Q,modalFocusBackId:X,contentBackId:Y,backgroundEnabled:w,fromId:a.target.getAttribute("id")}),H.removeAttribute(q),K(n,D))}if(R(j)&&"keydown"===e){var n=t.querySelector("body"),H=R(E),F=R(j),O=R(k)?R(k).innerHTML:"",Q=R(B),U=R(v),X=U.getAttribute(p),Y=U.getAttribute(C),Z=[].slice.call(F.querySelectorAll(T));27===a.keyCode&&(J({modal:F,modalContent:O,overlay:Q,modalFocusBackId:X,contentBackId:Y}),H.removeAttribute(q),K(n,D)),9===a.keyCode&&Z.indexOf(a.target)>=0&&(a.shiftKey?a.target===Z[0]&&(Z[Z.length-1].focus(),a.preventDefault()):a.target===Z[Z.length-1]&&(Z[0].focus(),a.preventDefault())),9===a.keyCode&&Z.indexOf(a.target)===-1&&(a.preventDefault(),Z[0].focus())}},!0)});var X=function Y(){U(),document.removeEventListener("DOMContentLoaded",Y)};document.addEventListener("DOMContentLoaded",X),window.van11yAccessibleModalWindowAria=U}(document);
