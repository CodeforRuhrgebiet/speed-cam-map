"use strict";!function(e,t,n,o){function a(e,t){null!==p&&e.removeLayer(p);var o={base:{color:"#ff335b",weight:3},mouseover:{color:"#ff0000"}},a=[];(p=n.geoJson(t,{stroke:!0,color:o.base.color,weight:o.base.weight,onEachFeature:function(e,t){var n=e.properties.tags.name,s=e.properties.tags.maxspeed;n+=s?" ("+s+" km/h)":"",t.bindPopup(n,{sticky:!0}),t.on("mouseover",function(e){t.openPopup(),a.length>0&&a.forEach(function(e){return e.setStyle(o.base)}),(a=p.getLayers().filter(function(t){return t.feature.properties.tags.name===e.target.feature.properties.tags.name})).forEach(function(e){e.setStyle(o.mouseover)})}),t.on("mouseout",function(e){})}})).addTo(e)}function s(e,t){var n=r(e),o=new XMLHttpRequest;d(),o.onreadystatechange=function(){if(4===o.readyState&&404===o.status)return l(),void(t&&t.onError&&t.onError());if(4===o.readyState&&200===o.status){var e=JSON.parse(o.responseText);l(),a(h,e),t&&t.onSuccess&&t.onSuccess()}},o.open("GET","geojson/"+n+".json",!0),o.send()}function r(e){return(e=e.split("."))[2]+"-"+e[1]+"-"+e[0]}function i(e){var t=e.getDay();return 6!==t&&0!==t}function u(){if(f.classList.contains("is-hidden")){var t=null;f.classList.remove("is-hidden"),t=f.getBoundingClientRect().height,f.style.height=0,e.setTimeout(function(){f.style.height=t+"px"},20)}}function c(){f.classList.contains("is-hidden")||(f.style.height=0,e.setTimeout(function(){f.classList.add("is-hidden"),f.style.height=null},500))}function d(){m.classList.remove("hidden")}function l(){m.classList.add("hidden")}moment.locale("de");var f=t.querySelector(".js-infolayer"),m=t.getElementById("js-loading"),p=null,g=[[51.291124,6.405716],[51.60693,7.630692]],h=n.map("map",{center:[51.457087,7.011429],zoom:12,maxBounds:g});n.Icon.Default.imagePath="images/",new n.tileLayer("http://{s}.tile.stamen.com/toner/{z}/{x}/{y}.png",{minZoom:12,maxZoom:18,bounds:g,attribution:'Daten zu Geschwindigkeitskontrollen: <a href="http://www.use24.essen.de/Webportal/agency/default.aspx?PortalObjectId=18399&OrganizationUnitId=1426">Ordnungsamt der Stadt Essen</a>. Kartendaten Â© <a href="http://www.openstreetmap.org">OpenStreetMap contributors</a>'}).addTo(h);var y=flatpickr("#js-date-picker",{defaultDate:"today",dateFormat:"d.m.Y",minDate:"26.06.2017",enableTime:!1,locale:{firstDayOfWeek:1},onReady:function(e,t,n){""!==t&&(i(n.parseDate(t))?s(t):u())},onChange:function(e,t,n){if(""!==t){if(!i(n.parseDate(t)))return u(),void(null!==p&&h.removeLayer(p));s(t,{onSuccess:function(){c()},onError:function(){u(),null!==p&&h.removeLayer(p)}})}}});t.getElementById("js-prev-date").addEventListener("click",function(e){var n=t.getElementById("js-date-picker").value,o=moment(n,"DD.MM.YYYY").subtract(1,"d");y.setDate(o.format("DD.MM.YYYY"),!0)}),t.getElementById("js-next-date").addEventListener("click",function(e){var n=t.getElementById("js-date-picker").value,o=moment(n,"DD.MM.YYYY").add(1,"d");y.setDate(o.format("DD.MM.YYYY"),!0)})}(window,document,L);
//# sourceMappingURL=main.min.js.map
